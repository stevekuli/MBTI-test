{"version":3,"file":"timer.js","sources":["../../src/utils/timer.ts"],"sourcesContent":["import { cancelAnimationFrame, now, requestAnimationFrame } from '@tarojs/runtime'\n\ninterface ITimeoutID {\n  id: number\n}\n\nexport function cancelTimeout (timeoutID: ITimeoutID) {\n  cancelAnimationFrame(timeoutID.id)\n}\n\nexport function requestTimeout (callback: () => void, delay = 0) {\n  const start = now()\n\n  const timeoutID: ITimeoutID = {\n    id: requestAnimationFrame(tick) as number\n  }\n\n  function tick () {\n    if (now() - start >= delay) {\n      // eslint-disable-next-line no-useless-call\n      callback.call(null)\n    } else {\n      timeoutID.id = requestAnimationFrame(tick) as number\n    }\n  }\n\n  return timeoutID\n}\n"],"names":[],"mappings":";;AAMM,SAAU,aAAa,CAAE,SAAqB,EAAA;AAClD,IAAA,oBAAoB,CAAC,SAAS,CAAC,EAAE,CAAC,CAAA;AACpC,CAAC;SAEe,cAAc,CAAE,QAAoB,EAAE,KAAK,GAAG,CAAC,EAAA;AAC7D,IAAA,MAAM,KAAK,GAAG,GAAG,EAAE,CAAA;AAEnB,IAAA,MAAM,SAAS,GAAe;AAC5B,QAAA,EAAE,EAAE,qBAAqB,CAAC,IAAI,CAAW;KAC1C,CAAA;AAED,IAAA,SAAS,IAAI,GAAA;AACX,QAAA,IAAI,GAAG,EAAE,GAAG,KAAK,IAAI,KAAK,EAAE;;AAE1B,YAAA,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;AACpB,SAAA;AAAM,aAAA;AACL,YAAA,SAAS,CAAC,EAAE,GAAG,qBAAqB,CAAC,IAAI,CAAW,CAAA;AACrD,SAAA;KACF;AAED,IAAA,OAAO,SAAS,CAAA;AAClB;;;;"}