import { Dimensions } from 'react-native';
import DeviceInfo from 'react-native-device-info';
import { isFunction } from './utils';
const globalAny = global;
const defaultWidth = 750;
const defaultRadio = {
    640: 2.34 / 2,
    750: 1,
    828: 1.81 / 2
};
let uiWidthPx = 375;
if (DeviceInfo.isTablet()) {
    uiWidthPx = 750;
}
export function pxTransform(size) {
    var _a;
    const deviceWidthDp = Dimensions.get('window').width;
    const config = ((_a = globalAny.__taroAppConfig) === null || _a === void 0 ? void 0 : _a.appConfig) || {};
    const deviceRatio = config.deviceRatio || defaultRadio;
    const designWidth = ((input = 0) => isFunction(config.designWidth)
        ? config.designWidth(input)
        : config.designWidth || defaultWidth)(size);
    if (!(designWidth in deviceRatio)) {
        throw new Error(`deviceRatio 配置中不存在 ${designWidth} 的设置！`);
    }
    const formatSize = ~~size;
    const rateSize = formatSize * deviceRatio[designWidth];
    return rateSize * deviceWidthDp / (uiWidthPx * 2);
}
//# sourceMappingURL=compute.js.map