{"version":3,"file":"index.js","sources":["../../../src/components/button/index.tsx"],"sourcesContent":["import './style/index.scss'\n\nimport classNames from 'classnames'\nimport React from 'react'\n\nimport { omit } from '../../utils'\n\ninterface IProps extends Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, 'type'> {\n  size?: string\n  plain?: boolean\n  hoverClass?: string\n  hoverStartTime?: number\n  hoverStayTime?: number\n  disabled?: boolean\n  loading?: boolean\n  type?: string\n  className?: string\n}\n\ninterface IState {\n  hover:boolean\n  touch: boolean\n}\n\nclass Button extends React.Component<IProps, IState> {\n  constructor (props) {\n    super(props)\n    this.state = {\n      hover: false,\n      touch: false\n    }\n  }\n\n  startTimer: ReturnType<typeof setTimeout>\n  endTimer: ReturnType<typeof setTimeout>\n\n  componentWillUnmount () {\n    this.startTimer && clearTimeout(this.startTimer)\n    this.endTimer && clearTimeout(this.endTimer)\n  }\n\n  render () {\n    const {\n      plain = false,\n      children,\n      disabled = false,\n      className,\n      style,\n      onClick,\n      onTouchStart,\n      onTouchEnd,\n      hoverClass = 'button-hover',\n      hoverStartTime = 20,\n      hoverStayTime = 70,\n      loading = false,\n      type,\n    } = this.props\n    const cls = classNames(\n      className,\n      'taro-button-core',\n      {\n        [`${hoverClass}`]: this.state.hover && !disabled\n      }\n    )\n\n    const _onTouchStart = e => {\n      this.setState(() => ({\n        touch: true\n      }))\n      if (hoverClass && hoverClass !== 'none' && !disabled) {\n        this.startTimer = setTimeout(() => {\n          if (this.state.touch) {\n            this.setState(() => ({\n              hover: true\n            }))\n          }\n        }, hoverStartTime)\n      }\n      onTouchStart && onTouchStart(e)\n    }\n    const _onTouchEnd = e => {\n      this.setState(() => ({\n        touch: false\n      }))\n      if (hoverClass && hoverClass !== 'none' && !disabled) {\n        this.endTimer = setTimeout(() => {\n          if (!this.state.touch) {\n            this.setState(() => ({\n              hover: false\n            }))\n          }\n        }, hoverStayTime)\n      }\n      onTouchEnd && onTouchEnd(e)\n    }\n\n    return (\n      <button\n        {...omit(this.props, ['hoverClass', 'onTouchStart', 'onTouchEnd', 'type', 'loading'])}\n        type={type}\n        className={cls}\n        style={style}\n        onClick={onClick}\n        disabled={disabled}\n        onTouchStart={_onTouchStart}\n        onTouchEnd={_onTouchEnd}\n        loading={loading.toString()}\n        plain={plain.toString()}\n      >\n        {!!loading && <i className='weui-loading' />}\n        {children}\n      </button>\n    )\n  }\n}\n\nexport default Button\n"],"names":["Button","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","hover","touch","_createClass","key","value","componentWillUnmount","startTimer","clearTimeout","endTimer","render","_this2","_this$props","_this$props$plain","plain","children","_this$props$disabled","disabled","className","style","onClick","onTouchStart","onTouchEnd","_this$props$hoverClas","hoverClass","_this$props$hoverStar","hoverStartTime","_this$props$hoverStay","hoverStayTime","_this$props$loading","loading","type","cls","classNames","_defineProperty","concat","_onTouchStart","e","setState","setTimeout","_onTouchEnd","React","createElement","Object","assign","omit","toString","Component"],"mappings":"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"}