{"version":3,"file":"index.js","sources":["../../../src/components/swiper/index.tsx"],"sourcesContent":["import 'swiper/swiper-bundle.min.css'\nimport './style/index.css'\n\nimport classNames from 'classnames'\nimport React from 'react'\nimport Swipers from 'swiper/swiper-bundle.esm.js'\n\nimport { debounce } from '../../utils'\n\nimport type ISwiper from 'swiper'\n\nlet INSTANCE_ID = 0\n\ninterface SwiperItemProps extends React.HTMLAttributes<HTMLDivElement> {\n  itemId: string\n}\n\ninterface SwiperProps extends React.HTMLAttributes<HTMLDivElement> {\n  autoplay?: boolean\n  interval?: number\n  duration?: number\n  current?: number\n  displayMultipleItems?: number\n  circular?: boolean\n  vertical?: boolean\n  spaceBetween?: any\n  previousMargin?: string\n  nextMargin?: string\n  indicatorColor?: string\n  indicatorActiveColor?: string\n  indicatorDots?: boolean\n  onAnimationFinish?: (e: TouchEvent) => void\n}\n\nconst createEvent = (type: string) => {\n  let e\n  try {\n    e = new TouchEvent(type)\n  } catch (err) {\n    e = document.createEvent('Event')\n    e.initEvent(type, true, true)\n  }\n  return e\n}\n\nclass SwiperItem extends React.Component<SwiperItemProps, Record<string, unknown>> {\n  render () {\n    const { className, style, itemId, children, ...restProps } = this.props\n    const cls = classNames('swiper-slide', className)\n    return (\n      <div\n        className={cls}\n        style={style}\n        item-id={itemId}\n        {...restProps}\n      >\n        {children}\n      </div>\n    )\n  }\n}\n\nclass Swiper extends React.Component<SwiperProps, Record<string, unknown>> {\n  _id = 1 + INSTANCE_ID++\n  _$current = 0\n  _$width = 0\n  _$height = 0\n  $el: HTMLDivElement | null\n  mySwiper: ISwiper\n  observer: MutationObserver\n  observerFirst: MutationObserver\n  observerLast: MutationObserver\n\n  componentDidMount () {\n    const {\n      autoplay = false,\n      circular = true,\n      current = 0,\n      displayMultipleItems = 1,\n      duration = 500,\n      interval = 5000,\n      spaceBetween,\n      vertical\n    } = this.props\n\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const that = this\n    const opt: Record<string, any> = {\n      // 指示器\n      pagination: { el: `.taro-swiper-${this._id} > .swiper-container > .swiper-pagination` },\n      direction: vertical ? 'vertical' : 'horizontal',\n      loop: circular,\n      slidesPerView: parseFloat(String(displayMultipleItems)),\n      initialSlide: parseInt(String(current), 10),\n      speed: parseInt(String(duration), 10),\n      observer: true,\n      observeParents: true,\n      on: {\n        slideChange () {\n          const e = createEvent('touchend')\n          try {\n            Object.defineProperty(e, 'detail', {\n              enumerable: true,\n              value: {\n                current: this.realIndex\n              }\n            })\n          } catch (err) {} // eslint-disable-line no-empty\n          that._$current = this.realIndex\n          that.handleOnChange(e)\n        },\n        transitionEnd () {\n          const e = createEvent('touchend')\n          try {\n            Object.defineProperty(e, 'detail', {\n              enumerable: true,\n              value: {\n                current: this.mySwiper.realIndex\n              }\n            })\n            if (this.mySwiper.isBeginning) {\n              this.mySwiper.slideToLoop((this.props.children as any).length - 1, 0)\n            } else if (this.mySwiper.isEnd) {\n              this.mySwiper.slideToLoop(0, 0)\n            }\n          } catch (err) {} // eslint-disable-line no-empty\n          that.handleOnAnimationFinish(e)\n        },\n        observerUpdate (_swiper: ISwiper, e) {\n          const target = e.target\n          const className = target && typeof target.className === 'string' ? target.className : ''\n          if (className.includes('taro_page') && target.style.display !== 'none') {\n            if (that.props.autoplay && target.contains(_swiper.$el[0])) {\n              if (that.props.circular) {\n                _swiper.slideToLoop(this.realIndex, 0) // 更新下标\n              } else {\n                _swiper.slideTo(this.realIndex)\n              }\n            }\n          }\n        }\n      }\n    }\n\n    // 自动播放\n    if (autoplay) {\n      opt.autoplay = {\n        delay: parseInt(String(interval), 10),\n        disableOnInteraction: false\n      }\n    }\n\n    // 两端距离\n    if (spaceBetween) {\n      opt.spaceBetween = spaceBetween\n    }\n\n    this.mySwiper = new Swipers(this.$el!, opt)\n    setTimeout(() => {\n      this.mySwiper.update()\n    }, 500)\n\n    if (!this.mySwiper || !this.props.circular) return\n\n    const wrapper = this.mySwiper.$wrapperEl[0]\n    this.observer = new MutationObserver(this.handleSwiperLoopListen)\n\n    this.observer.observe(wrapper, {\n      childList: true\n    })\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (this.mySwiper) {\n      const nextCurrent = typeof nextProps.current === 'number' ? nextProps.current : this._$current || 0\n\n      this.handleSwiperLoop()\n      // 是否衔接滚动模式\n      if (nextProps.circular) {\n        if (!this.mySwiper.isBeginning && !this.mySwiper.isEnd) {\n          this.mySwiper.slideToLoop(parseInt(nextCurrent, 10)) // 更新下标\n        }\n      } else {\n        this.mySwiper.slideTo(parseInt(nextCurrent, 10) + 1) // 更新下标\n      }\n\n      const autoplay = this.mySwiper.autoplay\n      // 判断是否需要停止或开始自动轮播\n      if (autoplay.running !== nextProps.autoplay) {\n        if (nextProps.autoplay) {\n          if (typeof this.mySwiper.params.autoplay === 'object') {\n            this.mySwiper.params.autoplay.disableOnInteraction = false\n            this.mySwiper.params.autoplay.delay = parseInt(String(this.props.interval) || '3000', 10)\n          }\n          autoplay.start()\n        } else {\n          autoplay.stop()\n        }\n      }\n\n      this.mySwiper.update() // 更新子元素\n    }\n  }\n\n  componentDidUpdate (preProps) {\n    if (preProps.children.length === 0 && (this.props.children as any).length > 0) {\n      (this.mySwiper as any).loopDestroy()\n      ;(this.mySwiper as any).loopCreate()\n    }\n    if (!this.mySwiper) return\n    if (this.props.autoplay) {\n      if (this._$width !== this.mySwiper.width || this._$height !== this.mySwiper.height) {\n        this.mySwiper.autoplay.start()\n      }\n    }\n    this._$width = this.mySwiper.width\n    this._$height = this.mySwiper.height\n  }\n\n  componentWillUnmount () {\n    this.$el = null\n    if (this.mySwiper) this.mySwiper.destroy()\n    this.observer?.disconnect?.()\n    this.observerFirst?.disconnect?.()\n    this.observerLast?.disconnect?.()\n  }\n\n  handleOnChange (e: React.FormEvent<HTMLDivElement>) {\n    const func = this.props.onChange\n    typeof func === 'function' && func(e)\n  }\n\n  handleOnAnimationFinish (e: TouchEvent) {\n    const func = this.props.onAnimationFinish\n    typeof func === 'function' && func(e)\n  }\n\n  parsePX (s = '0px') {\n    return parseFloat(s.replace(/r*px/i, ''))\n  }\n\n  handleSwiperLoopListen = () => {\n    this.observerFirst?.disconnect?.()\n    this.observerLast?.disconnect?.()\n    this.observerFirst = new MutationObserver(this.handleSwiperLoop)\n    this.observerLast = new MutationObserver(this.handleSwiperLoop)\n    const wrapper = this.mySwiper.$wrapperEl[0]\n    const list = wrapper.querySelectorAll('taro-swiper-item-core:not(.swiper-slide-duplicate)')\n    if (list.length >= 1) {\n      this.observerFirst.observe(list[0], {\n        characterData: true\n      })\n    } else if (list.length >= 2) {\n      this.observerLast.observe(list[list.length - 1], {\n        characterData: true\n      })\n    }\n  }\n\n  handleSwiperLoop = debounce(() => {\n    if (this.mySwiper && this.mySwiper.$wrapperEl && this.props.circular) {\n      // @ts-ignore\n      this.mySwiper.loopDestroy()\n      // @ts-ignore\n      this.mySwiper.loopCreate()\n    }\n  }, 500)\n\n  render () {\n    const {\n      className,\n      style,\n      vertical,\n      previousMargin,\n      nextMargin,\n      indicatorColor,\n      indicatorActiveColor\n    } = this.props\n    const defaultIndicatorColor = indicatorColor || 'rgba(0, 0, 0, .3)'\n    const defaultIndicatorActiveColor = indicatorActiveColor || '#000'\n    const cls = classNames(`taro-swiper-${this._id}`, className)\n    const sty = Object.assign({\n      paddingTop: vertical ? this.parsePX(previousMargin) : 0,\n      paddingRight: vertical ? 0 : this.parsePX(nextMargin),\n      paddingBottom: vertical ? this.parsePX(nextMargin) : 0,\n      paddingLeft: vertical ? 0 : this.parsePX(previousMargin),\n      overflow: 'hidden'\n    }, style)\n    const paginationCls = classNames(\n      'swiper-pagination',\n      {\n        'swiper-pagination-hidden': !this.props.indicatorDots,\n        'swiper-pagination-bullets': this.props.indicatorDots\n      }\n    )\n    return (\n      <div className={`swiper-container-wrapper ${cls}`} style={sty}>\n        <div className='swiper-container' style={{ overflow: 'visible' }} ref={(el) => { this.$el = el }}>\n          <div\n            dangerouslySetInnerHTML={{\n              __html: `<style type='text/css'>\n              .taro-swiper-${this._id} > .swiper-container > .swiper-pagination > .swiper-pagination-bullet { background: ${defaultIndicatorColor} }\n              .taro-swiper-${this._id} > .swiper-container > .swiper-pagination > .swiper-pagination-bullet-active { background: ${defaultIndicatorActiveColor} }\n              </style>`\n            }}\n          />\n          <div className='swiper-wrapper'>{this.props.children}</div>\n          <div className={paginationCls} />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport { Swiper, SwiperItem }\n"],"names":["INSTANCE_ID","createEvent","type","e","TouchEvent","err","document","initEvent","SwiperItem","_React$Component","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","render","_a","props","className","style","itemId","children","restProps","__rest","cls","classNames","React","createElement","Object","assign","Component","Swiper","_React$Component2","_super2","_this","_id","_$current","_$width","_$height","handleSwiperLoopListen","_b","observerFirst","disconnect","_d","observerLast","_c","MutationObserver","handleSwiperLoop","wrapper","mySwiper","$wrapperEl","list","querySelectorAll","length","observe","characterData","debounce","circular","loopDestroy","loopCreate","componentDidMount","_this2","_this$props","_this$props$autoplay","autoplay","_this$props$circular","_this$props$current","current","_this$props$displayMu","displayMultipleItems","_this$props$duration","duration","_this$props$interval","interval","spaceBetween","vertical","that","opt","pagination","el","concat","direction","loop","slidesPerView","parseFloat","String","initialSlide","parseInt","speed","observer","observeParents","on","slideChange","defineProperty","enumerable","realIndex","handleOnChange","transitionEnd","isBeginning","slideToLoop","isEnd","handleOnAnimationFinish","observerUpdate","_swiper","target","includes","display","contains","$el","slideTo","delay","disableOnInteraction","Swipers","setTimeout","update","childList","UNSAFE_componentWillReceiveProps","nextProps","nextCurrent","running","_typeof","params","start","stop","componentDidUpdate","preProps","width","height","componentWillUnmount","destroy","_f","_e","func","onChange","onAnimationFinish","parsePX","s","undefined","replace","_this3","_this$props2","previousMargin","nextMargin","indicatorColor","indicatorActiveColor","defaultIndicatorColor","defaultIndicatorActiveColor","sty","paddingTop","paddingRight","paddingBottom","paddingLeft","overflow","paginationCls","indicatorDots","ref","dangerouslySetInnerHTML","__html"],"mappings":"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"}