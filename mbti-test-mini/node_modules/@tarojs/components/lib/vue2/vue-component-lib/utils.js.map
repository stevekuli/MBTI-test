{"version":3,"file":"utils.js","sources":["../../../../taro-components-library-vue2/src/vue-component-lib/utils.ts"],"sourcesContent":["/**\n * Modify from https://github.com/diondree/stencil-vue2-output-target/blob/master/vue-component-lib/utils.ts\n * MIT License https://github.com/diondree/stencil-vue2-output-target/blob/master/LICENSE.md\n */\nimport Vue, { CreateElement, VNode } from 'vue'\n\nexport const createCommonMethod = (methodName: string) =>\n  function (...args: any[]) {\n    this.$refs.wc[methodName](...args)\n  } as unknown\n\nexport const toLowerCase = (str: string) => str.toLowerCase()\n\nexport const toDashCase = (str: string) =>\n  toLowerCase(\n    str\n      .replace(/([A-Z0-9])/g, (g) => ' ' + g[0])\n      .trim()\n      .replace(/ /g, '-')\n  )\n\nexport const createCommonRender = (\n  tagName: string,\n  eventNames: string[] = [],\n  defineCustomElement: any,\n) => {\n  /**\n   * Create a Vue component wrapper around a Web Component.\n   * Note: The `props` here are not all properties on a component.\n   * They refer to whatever properties are set on an instance of a component.\n   */\n\n  if (!DEPRECATED_ADAPTER_COMPONENT && defineCustomElement !== undefined) {\n    defineCustomElement()\n  }\n\n  return function (createElement: CreateElement): VNode {\n    const vueElement = this as Vue\n    const allListeners = eventNames.reduce((listeners, eventName) => {\n      return {\n        ...listeners,\n        [eventName]: (event: CustomEvent<any>) => {\n          vueElement.$emit(eventName, event)\n          // Note(taro): 优化 input、change 事件与 v-model 兼容性问题\n          if (['input', 'change'].includes(eventName)) {\n            vueElement.$emit('update:modelValue', event.detail.value)\n          }\n        },\n      }\n    }, vueElement.$listeners)\n    const attributes = vueElement.$props\n      ? Object.keys(vueElement.$props).reduce((attrs: any, prop: string) => {\n        const attributeName = toDashCase(prop)\n        attrs[attributeName] = vueElement.$props[prop]\n        return attrs\n      }, {})\n      : {}\n    return createElement(\n      tagName,\n      {\n        ref: 'wc',\n        domProps: vueElement.$props,\n        on: {\n          ...allListeners,\n          // Note(taro): click 事件绑定 tap 事件触发\n          click: (event) => {\n            typeof allListeners.click === 'function' && allListeners.click(event)\n            vueElement.$emit('tap', event)\n          }\n        },\n        attrs: { ...attributes, 'data-testid': tagName },\n      },\n      [vueElement.$slots.default]\n    )\n  }\n}\n"],"names":[],"mappings":"AAMa,MAAA,kBAAkB,GAAG,CAAC,UAAkB,KACnD,UAAU,GAAG,IAAW,EAAA;IACtB,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,CAAA;AACpC,EAAY;AAEP,MAAM,WAAW,GAAG,CAAC,GAAW,KAAK,GAAG,CAAC,WAAW,GAAE;AAEhD,MAAA,UAAU,GAAG,CAAC,GAAW,KACpC,WAAW,CACT,GAAG;AACA,KAAA,OAAO,CAAC,aAAa,EAAE,CAAC,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACzC,KAAA,IAAI,EAAE;AACN,KAAA,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,EACtB;AAEI,MAAM,kBAAkB,GAAG,CAChC,OAAe,EACf,UAAA,GAAuB,EAAE,EACzB,mBAAwB,KACtB;AACF;;;;AAIG;AAEH,IAAA,IAAI,CAAC,4BAA4B,IAAI,mBAAmB,KAAK,SAAS,EAAE;AACtE,QAAA,mBAAmB,EAAE,CAAA;AACtB,KAAA;AAED,IAAA,OAAO,UAAU,aAA4B,EAAA;QAC3C,MAAM,UAAU,GAAG,IAAW,CAAA;QAC9B,MAAM,YAAY,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,SAAS,EAAE,SAAS,KAAI;YAC9D,OACK,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,SAAS,KACZ,CAAC,SAAS,GAAG,CAAC,KAAuB,KAAI;AACvC,oBAAA,UAAU,CAAC,KAAK,CAAC,SAAS,EAAE,KAAK,CAAC,CAAA;;oBAElC,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE;wBAC3C,UAAU,CAAC,KAAK,CAAC,mBAAmB,EAAE,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA;AAC1D,qBAAA;AACH,iBAAC,EACF,CAAA,CAAA;AACH,SAAC,EAAE,UAAU,CAAC,UAAU,CAAC,CAAA;AACzB,QAAA,MAAM,UAAU,GAAG,UAAU,CAAC,MAAM;AAClC,cAAE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,KAAU,EAAE,IAAY,KAAI;AACnE,gBAAA,MAAM,aAAa,GAAG,UAAU,CAAC,IAAI,CAAC,CAAA;gBACtC,KAAK,CAAC,aAAa,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA;AAC9C,gBAAA,OAAO,KAAK,CAAA;aACb,EAAE,EAAE,CAAC;cACJ,EAAE,CAAA;QACN,OAAO,aAAa,CAClB,OAAO,EACP;AACE,YAAA,GAAG,EAAE,IAAI;YACT,QAAQ,EAAE,UAAU,CAAC,MAAM;AAC3B,YAAA,EAAE,kCACG,YAAY,CAAA,EAAA;;AAEf,gBAAA,KAAK,EAAE,CAAC,KAAK,KAAI;AACf,oBAAA,OAAO,YAAY,CAAC,KAAK,KAAK,UAAU,IAAI,YAAY,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;AACrE,oBAAA,UAAU,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;AAChC,iBAAC,EACF,CAAA;AACD,YAAA,KAAK,kCAAO,UAAU,CAAA,EAAA,EAAE,aAAa,EAAE,OAAO,EAAE,CAAA;SACjD,EACD,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,CAC5B,CAAA;AACH,KAAC,CAAA;AACH;;;;"}