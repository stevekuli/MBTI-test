import{r as t,c as i,h as s,H as e,g as h}from"./p-dd7a128d.js";const o=class{constructor(s){t(this,s),this.onChange=i(this,"change",7),this.onChanging=i(this,"changing",7),this.handleTouchStart=t=>{this.touching||this.disabled||(this.touching=!0,this.touchId=t.targetTouches[0].identifier,this.totalWidth=this.sliderInsRef.clientWidth||1,this.ogX=t.targetTouches[0].pageX,this.ogPercent=this.percent)},this.handleTouchMove=t=>{const{disabled:i,touching:s,touchId:e,totalWidth:h,max:o,min:r,ogX:l,ogPercent:n}=this;if(!s||i)return;if(t.targetTouches[0].identifier!==e)return;t.preventDefault();let a=(t.targetTouches[0].pageX-l)/h*100+n;a=this.handleValueUpdate(a,0,100),this.updateByStep(r+.01*a*(o-r)),this.onChanging.emit({detail:t.detail,value:this.value})},this.handleTouchEnd=t=>{const{disabled:i,touching:s}=this;s&&!i&&(this.percent!==this.ogPercent&&this.onChange.emit({detail:t.detail,value:this.value}),this.touching=!1,this.touchId=null,this.ogX=0,this.ogPercent=0)},this.handleValueUpdate=(t,i=this.min,s=this.max)=>(t=isNaN(t)?0:t,Math.max(i,Math.min(t,s))),this.min=0,this.max=100,this.step=1,this.disabled=!1,this.value=0,this.activeColor="#1aad19",this.backgroundColor="#e9e9e9",this.blockSize=28,this.blockColor="#ffffff",this.showValue=!1,this.name="",this.totalWidth=1,this.touching=!1,this.ogX=0,this.touchId=null,this.percent=0,this.ogPercent=void 0,this.isWillLoadCalled=!1}function(t){if(!this.isWillLoadCalled)return;const{max:i,min:s}=this;if(null!==t){const e=this.handleValueUpdate(t,s,i);this.updateByStep(e)}}componentDidLoad(){this.handler.addEventListener("touchstart",this.handleTouchStart),this.handler.addEventListener("touchmove",this.handleTouchMove),this.handler.addEventListener("touchend",this.handleTouchEnd)}componentWillLoad(){this.isWillLoadCalled=!0;const{value:t,max:i,min:s}=this,e=this.handleValueUpdate(t,s,i);this.updateByStep(e)}updateByStep(t){const{max:i,min:s,step:e}=this,h=Math.floor((i-s)/e);for(let i=0;i<=h;i++){const o=s+e*i,r=i===h?null:s+e*(i+1);if(t===o)break;if(!r&&t>o&&(t=o),r&&t>o&&t<r){t=t-o<e/2?o:r;break}}const o=(t-s)/(i-s)*100;this.value=t,this.percent=o}render(){const{showValue:t,backgroundColor:i,activeColor:h,blockColor:o,name:r,percent:l,value:n}=this;let a=this.blockSize;const d={backgroundColor:i},c=l>100?100:l,u={width:`${c}%`,backgroundColor:h};a<12&&(a=12),a>28&&(a=28);const p={left:`${c}%`,width:`${a}px`,height:`${a}px`,backgroundColor:o,marginTop:`-${Math.floor(a/2)}px`,marginLeft:`-${Math.floor(a/2)}px`};return s(e,{class:"weui-slider-box"},s("div",{class:"weui-slider"},s("div",{class:"weui-slider__inner",style:d,ref:t=>this.sliderInsRef=t},s("div",{style:u,class:"weui-slider__track"}),s("div",{class:"weui-slider__handler",ref:t=>{t&&(this.handler=t)},style:p}),s("input",{type:"hidden",name:r,value:n}))),t&&s("div",{class:"weui-slider-box__value"},n))}get el(){return h(this)}static get watchers(){return{value:["function"]}}};o.style=".weui-slider{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:15px 18px}.weui-slider__inner{background-color:#e9e9e9;height:2px;position:relative}.weui-slider__track{background-color:#1aad19;width:0;height:2px}.weui-slider__handler{background-color:#fff;border-radius:50%;width:28px;height:28px;margin-top:-14px;margin-left:-14px;position:absolute;top:50%;left:0;-webkit-box-shadow:0 0 4px rgba(0,0,0,.2);box-shadow:0 0 4px rgba(0,0,0,.2)}.weui-slider-box{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex}.weui-slider-box .weui-slider{-ms-flex:1;flex:1}.weui-slider-box__value{color:#888;text-align:center;min-width:24px;margin-left:.5em;font-size:14px}";export{o as taro_slider_core}