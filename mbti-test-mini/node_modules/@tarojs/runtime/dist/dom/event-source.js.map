{"version":3,"file":"event-source.js","sources":["../../src/dom/event-source.ts"],"sourcesContent":["import type { TaroNode } from './node'\n\ninterface IEventSource extends Map<string | undefined | null, TaroNode> {\n  removeNode (child: TaroNode): void\n  removeNodeTree (child: TaroNode): void\n}\n\nclass EventSource extends Map {\n  removeNode (child: TaroNode) {\n    const { sid, uid } = child\n    this.delete(sid)\n    if (uid !== sid && uid) this.delete(uid)\n  }\n\n  removeNodeTree (child: TaroNode) {\n    this.removeNode(child)\n    const { childNodes } = child\n    childNodes.forEach(node => this.removeNodeTree(node))\n  }\n}\n\nexport const eventSource: IEventSource = new EventSource()\n"],"names":[],"mappings":"AAOA,MAAM,WAAY,SAAQ,GAAG,CAAA;AAC3B,IAAA,UAAU,CAAE,KAAe,EAAA;AACzB,QAAA,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,KAAK,CAAA;AAC1B,QAAA,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA;AAChB,QAAA,IAAI,GAAG,KAAK,GAAG,IAAI,GAAG;AAAE,YAAA,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAA;KACzC;AAED,IAAA,cAAc,CAAE,KAAe,EAAA;AAC7B,QAAA,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAA;AACtB,QAAA,MAAM,EAAE,UAAU,EAAE,GAAG,KAAK,CAAA;AAC5B,QAAA,UAAU,CAAC,OAAO,CAAC,IAAI,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC,CAAA;KACtD;AACF,CAAA;AAEY,MAAA,WAAW,GAAiB,IAAI,WAAW;;;;"}