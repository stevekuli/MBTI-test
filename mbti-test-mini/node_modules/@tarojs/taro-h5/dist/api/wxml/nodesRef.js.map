{"version":3,"file":"nodesRef.js","sources":["../../../src/api/wxml/nodesRef.ts"],"sourcesContent":["import Taro from '@tarojs/api'\n\nimport { SelectorQuery } from './selectorQuery'\n\nexport class NodesRef implements Taro.NodesRef {\n  _component?: TaroGeneral.IAnyObject\n  _selector: string\n  _selectorQuery: SelectorQuery\n  _single: boolean\n\n  constructor (selector: string, querySelectorQuery: SelectorQuery, single: boolean) {\n    this._component = querySelectorQuery._component\n    this._selector = selector\n    this._selectorQuery = querySelectorQuery\n    this._single = single\n  }\n\n  context (cb) {\n    const { _selector, _component, _single, _selectorQuery } = this\n    _selectorQuery._push(_selector, _component, _single, { context: !0 }, cb)\n    return _selectorQuery\n  }\n\n  node (cb) {\n    const { _selector, _component, _single, _selectorQuery } = this\n    _selectorQuery._push(_selector, _component, _single, { nodeCanvasType: !0, node: !0 }, cb)\n    return _selectorQuery\n  }\n\n  boundingClientRect (cb) {\n    const { _selector, _component, _single, _selectorQuery } = this\n    _selectorQuery._push(_selector, _component, _single, { id: !0, dataset: !0, rect: !0, size: !0 }, cb)\n    return _selectorQuery\n  }\n\n  scrollOffset (cb) {\n    const { _selector, _component, _single, _selectorQuery } = this\n    _selectorQuery._push(_selector, _component, _single, { id: !0, dataset: !0, scrollOffset: !0 }, cb)\n    return _selectorQuery\n  }\n\n  fields (fields, cb) {\n    const { _selector, _component, _single, _selectorQuery } = this\n    const { id, dataset, rect, size, scrollOffset, context, node, properties = [], computedStyle = [] } = fields\n\n    _selectorQuery._push(\n      _selector,\n      _component,\n      _single,\n      {\n        id,\n        dataset,\n        rect,\n        size,\n        scrollOffset,\n        context,\n        node,\n        nodeCanvasType: node,\n        properties,\n        computedStyle,\n      },\n      cb\n    )\n\n    return _selectorQuery\n  }\n}\n"],"names":[],"mappings":"MAIa,QAAQ,CAAA;AAMnB,IAAA,WAAA,CAAa,QAAgB,EAAE,kBAAiC,EAAE,MAAe,EAAA;AAC/E,QAAA,IAAI,CAAC,UAAU,GAAG,kBAAkB,CAAC,UAAU,CAAA;AAC/C,QAAA,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAA;AACzB,QAAA,IAAI,CAAC,cAAc,GAAG,kBAAkB,CAAA;AACxC,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAA;KACtB;AAED,IAAA,OAAO,CAAE,EAAE,EAAA;QACT,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,IAAI,CAAA;AAC/D,QAAA,cAAc,CAAC,KAAK,CAAC,SAAS,EAAE,UAAU,EAAE,OAAO,EAAE,EAAE,OAAO,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;AACzE,QAAA,OAAO,cAAc,CAAA;KACtB;AAED,IAAA,IAAI,CAAE,EAAE,EAAA;QACN,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,IAAI,CAAA;QAC/D,cAAc,CAAC,KAAK,CAAC,SAAS,EAAE,UAAU,EAAE,OAAO,EAAE,EAAE,cAAc,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;AAC1F,QAAA,OAAO,cAAc,CAAA;KACtB;AAED,IAAA,kBAAkB,CAAE,EAAE,EAAA;QACpB,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,IAAI,CAAA;AAC/D,QAAA,cAAc,CAAC,KAAK,CAAC,SAAS,EAAE,UAAU,EAAE,OAAO,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;AACrG,QAAA,OAAO,cAAc,CAAA;KACtB;AAED,IAAA,YAAY,CAAE,EAAE,EAAA;QACd,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,IAAI,CAAA;AAC/D,QAAA,cAAc,CAAC,KAAK,CAAC,SAAS,EAAE,UAAU,EAAE,OAAO,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC,EAAE,YAAY,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;AACnG,QAAA,OAAO,cAAc,CAAA;KACtB;IAED,MAAM,CAAE,MAAM,EAAE,EAAE,EAAA;QAChB,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,IAAI,CAAA;QAC/D,MAAM,EAAE,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,YAAY,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,GAAG,EAAE,EAAE,aAAa,GAAG,EAAE,EAAE,GAAG,MAAM,CAAA;QAE5G,cAAc,CAAC,KAAK,CAClB,SAAS,EACT,UAAU,EACV,OAAO,EACP;YACE,EAAE;YACF,OAAO;YACP,IAAI;YACJ,IAAI;YACJ,YAAY;YACZ,OAAO;YACP,IAAI;AACJ,YAAA,cAAc,EAAE,IAAI;YACpB,UAAU;YACV,aAAa;SACd,EACD,EAAE,CACH,CAAA;AAED,QAAA,OAAO,cAAc,CAAA;KACtB;AACF;;;;"}