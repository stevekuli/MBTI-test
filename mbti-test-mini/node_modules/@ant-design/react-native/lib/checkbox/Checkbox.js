"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _classnames=_interopRequireDefault(require("classnames"));var _useMergedState3=_interopRequireDefault(require("rc-util/lib/hooks/useMergedState"));var React=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _ButtonWave=_interopRequireDefault(require("../button/ButtonWave"));var _style=require("../style");var _index=_interopRequireDefault(require("../view/index"));var _devWarning=_interopRequireDefault(require("../_util/devWarning"));var _useAnimations=require("../_util/hooks/useAnimations");var _index2=_interopRequireDefault(require("./style/index"));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2["default"])(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2["default"])(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}var __rest=void 0&&(void 0).__rest||function(s,e){var t={};for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];}if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]];}return t;};var InternalCheckbox=function InternalCheckbox(_a,ref){var _a$prefixCls=_a.prefixCls,prefixCls=_a$prefixCls===void 0?'checkbox':_a$prefixCls,style=_a.style,styles=_a.styles,children=_a.children,defaultChecked=_a.defaultChecked,disabled=_a.disabled,onChange=_a.onChange,indeterminate=_a.indeterminate,restProps=__rest(_a,["prefixCls","style","styles","children","defaultChecked","disabled","onChange","indeterminate"]);(0,_devWarning["default"])('checked'in restProps||!('value'in restProps),'Checkbox','`value` is not a valid prop, do you mean `checked`?');var _useMergedState=(0,_useMergedState3["default"])(false,{value:restProps.checked,defaultValue:defaultChecked}),_useMergedState2=(0,_slicedToArray2["default"])(_useMergedState,2),innerChecked=_useMergedState2[0],setInnerChecked=_useMergedState2[1];var _useAnimatedTiming=(0,_useAnimations.useAnimatedTiming)(),_useAnimatedTiming2=(0,_slicedToArray2["default"])(_useAnimatedTiming,2),animatedValue=_useAnimatedTiming2[0],animate=_useAnimatedTiming2[1];var transitionOpacity={opacity:animatedValue.interpolate({inputRange:[0,1],outputRange:[0,1]})};var transitionTransform={transform:[{rotate:'45deg'},{scale:animatedValue.interpolate({inputRange:[0,1],outputRange:[0,1]})}]};React.useEffect(function(){animate({toValue:innerChecked?1:0,duration:300,easing:_reactNative.Easing.bezier(0.68,-0.55,0.27,1.55)});},[animate,innerChecked]);function triggerChange(newChecked){if(!disabled){!('checked'in restProps)&&setInnerChecked(newChecked);onChange===null||onChange===void 0?void 0:onChange({target:{checked:newChecked}});return newChecked;}return innerChecked;}var onInternalClick=function onInternalClick(){triggerChange(!innerChecked);};var Checkbox=function(_React$Component){(0,_inherits2["default"])(Checkbox,_React$Component);var _super=_createSuper(Checkbox);function Checkbox(){var _this;(0,_classCallCheck2["default"])(this,Checkbox);_this=_super.apply(this,arguments);_this.onPress=function(){onInternalClick();};return _this;}(0,_createClass2["default"])(Checkbox,[{key:"render",value:function render(){var _this2=this;return React.createElement(_style.WithTheme,{themeStyles:_index2["default"],styles:styles},function(_styles){var _classNames,_classNames2,_classNames3;var _a,_b;var antd_checkbox=(0,_classnames["default"])("".concat(prefixCls),(_classNames={},(0,_defineProperty2["default"])(_classNames,"".concat(prefixCls,"_checked"),innerChecked),(0,_defineProperty2["default"])(_classNames,"".concat(prefixCls,"_disabled"),disabled),_classNames)).split(' ').map(function(a){return _styles[a];});var antd_checkbox_inner=(0,_classnames["default"])("".concat(prefixCls,"_inner"),(_classNames2={},(0,_defineProperty2["default"])(_classNames2,"".concat(prefixCls,"_inner_indeterminate"),indeterminate),(0,_defineProperty2["default"])(_classNames2,"".concat(prefixCls,"_inner_disabled"),disabled),_classNames2)).split(' ').map(function(a){return _styles[a];});var antd_checkbox_inner_after=(0,_classnames["default"])(undefined,(_classNames3={},(0,_defineProperty2["default"])(_classNames3,"".concat(prefixCls,"_inner_after"),!indeterminate),(0,_defineProperty2["default"])(_classNames3,"".concat(prefixCls,"_inner_after_indeterminate"),indeterminate),(0,_defineProperty2["default"])(_classNames3,"".concat(prefixCls,"_inner_after_disabled"),disabled),_classNames3)).split(' ').map(function(a){return _styles[a];});var antd_checlbox_label=(0,_classnames["default"])("".concat(prefixCls,"_label"),(0,_defineProperty2["default"])({},"".concat(prefixCls,"_label_disabled"),disabled)).split(' ').map(function(a){return _styles[a];});var Color=innerChecked?(_a=_styles.checkbox_checked)===null||_a===void 0?void 0:_a.borderColor:(_b=_styles.checkbox)===null||_b===void 0?void 0:_b.borderColor;return React.createElement(_reactNative.View,{accessibilityRole:"checkbox",accessibilityState:{checked:innerChecked,disabled:disabled},style:[_styles["".concat(prefixCls,"_wrapper")],style]},React.createElement(_reactNative.View,{style:_styles.checkbox_wave},React.createElement(_ButtonWave["default"],{style:antd_checkbox,Color:Color,disabled:disabled,onPress:_this2.onPress},React.createElement(_reactNative.Animated.View,{style:[antd_checkbox_inner,transitionOpacity]}),React.createElement(_reactNative.Animated.View,{style:[transitionTransform,antd_checkbox_inner_after]}))),React.createElement(_reactNative.Pressable,{disabled:disabled,onPress:_this2.onPress},React.createElement(_index["default"],{style:antd_checlbox_label},children)));});}}]);return Checkbox;}(React.Component);return React.createElement(Checkbox,(0,_extends2["default"])({ref:ref},restProps));};var AntmCheckbox=React.forwardRef(InternalCheckbox);AntmCheckbox.displayName='AntmCheckbox';var _default=AntmCheckbox;exports["default"]=_default;