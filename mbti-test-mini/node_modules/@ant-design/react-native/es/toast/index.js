var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _react=_interopRequireDefault(require("react"));var _portal=_interopRequireDefault(require("../portal"));var _ToastContainer=_interopRequireDefault(require("./ToastContainer"));var SHORT=3;var defaultConfig={duration:SHORT,onClose:function onClose(){},mask:true,stackable:true};var defaultProps=(0,_extends2["default"])({},defaultConfig);var toastKeyMap={};function remove(key){_portal["default"].remove(key);delete toastKeyMap[key];}function removeAll(){Object.keys(toastKeyMap).forEach(function(_key){return _portal["default"].remove(Number.parseInt(_key,10));});}function notice(content,type){var duration=arguments.length>2&&arguments[2]!==undefined?arguments[2]:defaultProps.duration;var onClose=arguments.length>3&&arguments[3]!==undefined?arguments[3]:defaultProps.onClose;var mask=arguments.length>4&&arguments[4]!==undefined?arguments[4]:defaultProps.mask;var props=(0,_extends2["default"])((0,_extends2["default"])({},defaultProps),{content:content,type:type,duration:duration,onClose:onClose,mask:mask});if(typeof content!=='string'){props=(0,_extends2["default"])((0,_extends2["default"])({},props),content);}if(!props.stackable){removeAll();}var key=_portal["default"].add(_react["default"].createElement(_ToastContainer["default"],{content:props.content,duration:props.duration,onClose:props.onClose,type:props.type,mask:props.mask,onAnimationEnd:function onAnimationEnd(){remove(key);}}));toastKeyMap[key]=1;return key;}var _default={SHORT:SHORT,LONG:8,defaultConfig:defaultConfig,getConfig:function getConfig(){return(0,_extends2["default"])({},defaultProps);},config:function config(props){defaultProps=(0,_extends2["default"])((0,_extends2["default"])({},defaultProps),props);},show:function show(props,duration,mask){return notice(props,'info',duration,function(){},mask);},info:function info(props,duration,onClose,mask){return notice(props,'info',duration,onClose,mask);},success:function success(props,duration,onClose,mask){return notice(props,'success',duration,onClose,mask);},fail:function fail(props,duration,onClose,mask){return notice(props,'fail',duration,onClose,mask);},offline:function offline(props,duration,onClose,mask){return notice(props,'offline',duration,onClose,mask);},loading:function loading(props,duration,onClose,mask){return notice(props,'loading',duration,onClose,mask);},remove:remove,removeAll:removeAll};exports["default"]=_default;